# 问题一：选举的多线程问题
选举线程开启多个线程向所有peer发送rpc，在处理requestVote结果时存在多线程同步的问题。

rpc需要一定时间，因此主线程应使用条件变量的wait来等待rpc完成，但等待的时间不能是无限的，本节点有可能和其他节点网络分区，得到的票数永远不可能过半，这样可能会导致主线程一直在wait中等待。有两种思路可以解决这个问题：

- 选举计时器会在一段时间后重新发起一次选举，届时会更新term（增加1），可以在本线程中保存一个term，在wait时将其与公共的currentTerm比较，若发现自己持有的term已经过时，就无条件终止这一次选举，让位给新的选举流程。
- 给rpc设置一定超时时间，若过了这段时间仍然没有收集到足够的选票就结束这次选举，rpc的超时时间依赖于通信，但应是远小于选举超时时间（范围）的。

# 